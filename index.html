<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Mafia Store</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="assets/css/style.css" />
</head>
<body style="font-family:sans-serif; text-align:center; padding:50px;">

  <h1>Welcome to Mafia Store ğŸ›’ğŸ˜</h1>

  <div id="not-logged-in">
    <p><a href="auth.html">ğŸ” Login to your account</a></p>
  </div>

  <div id="logged-in" style="display:none;">
    <p><a href="profile.html">ğŸ“‹ Complete your profile</a></p>
    <p><button onclick="logout()">ğŸšª Logout</button></p>
  </div>

  <script type="module">
    import { createClient } from 'https://esm.sh/@supabase/supabase-js@2'

    const supabase = createClient(
      'https://vjqkznjejpzwncoelyvd.supabase.co',
      'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZqcWt6bmplanB6d25jb2VseXZkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMwOTg2MDgsImV4cCI6MjA2ODY3NDYwOH0.2B4HcfnDXolf7YUAaoHx5Ax2XK1pQRmcfdFl-zq4CSY'
    );

    const user = await supabase.auth.getUser();

    if (user.data.user) {
      // Logged in
      document.getElementById("not-logged-in").style.display = "none";
      document.getElementById("logged-in").style.display = "block";
    }

    window.logout = async function() {
      await supabase.auth.signOut();
      location.reload();
    }
  </script>

</body>
</html>
